{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/DataBase/painterDB.ts","webpack:///./src/app.ts","webpack:///./src/assets/icons/home-icon.png","webpack:///./src/assets/images/large/airplane.png","webpack:///./src/assets/images/large/bird.png","webpack:///./src/assets/images/large/car.png","webpack:///./src/assets/images/large/cat.jpg","webpack:///./src/assets/images/large/cow.jpg","webpack:///./src/assets/images/large/ezhik.jpg","webpack:///./src/assets/images/large/fish.jpg","webpack:///./src/assets/images/large/popugai.jpg","webpack:///./src/assets/images/large/train.jpg","webpack:///./src/assets/images/small/airplane.png","webpack:///./src/assets/images/small/bird.png","webpack:///./src/assets/images/small/car.png","webpack:///./src/assets/images/small/cat.jpg","webpack:///./src/assets/images/small/cow.jpg","webpack:///./src/assets/images/small/ezhik.jpg","webpack:///./src/assets/images/small/fish.jpg","webpack:///./src/assets/images/small/popugai.jpg","webpack:///./src/assets/images/small/train.jpg","webpack:///./src/core/canvas/common/scene.ts","webpack:///./src/core/canvas/common/tool.ts","webpack:///./src/core/canvas/common/toolObject.ts","webpack:///./src/core/canvas/currentState.ts","webpack:///./src/core/canvas/painter.ts","webpack:///./src/core/canvas/tools/ellipse/ellipse.ts","webpack:///./src/core/canvas/tools/ellipse/ellipseIcon.ts","webpack:///./src/core/canvas/tools/ellipse/ellipseObject.ts","webpack:///./src/core/canvas/tools/eraser/eraser.ts","webpack:///./src/core/canvas/tools/eraser/eraserIcon.ts","webpack:///./src/core/canvas/tools/eraser/eraserObject.ts","webpack:///./src/core/canvas/tools/filler/filler.ts","webpack:///./src/core/canvas/tools/filler/fillerIcon.ts","webpack:///./src/core/canvas/tools/filler/fillerObject.ts","webpack:///./src/core/canvas/tools/line/line.ts","webpack:///./src/core/canvas/tools/line/lineIcon.ts","webpack:///./src/core/canvas/tools/line/lineObject.ts","webpack:///./src/core/canvas/tools/rect/rect.ts","webpack:///./src/core/canvas/tools/rect/rectIcon.ts","webpack:///./src/core/canvas/tools/rect/rectObject.ts","webpack:///./src/core/canvas/tools/straight_line/straightLine.ts","webpack:///./src/core/canvas/tools/straight_line/straightLineIcon.ts","webpack:///./src/core/canvas/tools/straight_line/straightLineObject.ts","webpack:///./src/core/common_functions.ts","webpack:///./src/core/router/page.ts","webpack:///./src/core/router/router.ts","webpack:///./src/core/router/routes.ts","webpack:///./src/pages/choose-image/choose-image-page.html","webpack:///./src/pages/choose-image/choose-image-page.ts","webpack:///./src/pages/colouring/colouring-page.html","webpack:///./src/pages/colouring/colouring-page.ts","webpack:///./src/pages/home/home-page.html","webpack:///./src/pages/home/home-page.ts","webpack:///./src/pages/my-paintings/my_paintings-page.html","webpack:///./src/pages/my-paintings/my_paintings-page.ts","webpack:///./src/pages/painting/painting-page.html","webpack:///./src/pages/painting/painting-page.ts"],"names":[],"mappings":"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","file":"app.390570d1205095755a54.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/app.ts\");\n","\r\nconst DB_NAME = 'PAINTER';\r\nconst DB_Version = 1;\r\n\r\n\r\nexport class PainterDB {\r\n    db: IDBDatabase;\r\n    currentObjectStoreName: string = '';\r\n\r\n    init (objectStoreName: string, allOSNames?: Array<string>) {\r\n        return new Promise((resolve, reject) => {\r\n            let openRequest: IDBOpenDBRequest = indexedDB.open(DB_NAME, DB_Version);\r\n            openRequest.onerror = err => reject(err);\r\n            openRequest.onsuccess = async () => {\r\n                this.db = openRequest.result;\r\n                this.currentObjectStoreName = objectStoreName;\r\n                resolve(this.db);\r\n            };\r\n            openRequest.onupgradeneeded = (event: IDBVersionChangeEvent) => {\r\n                //@ts-ignore\r\n                let db: IDBDatabase = event.target.result;\r\n                if (allOSNames) {\r\n                    for (let objectStoreName of allOSNames) {\r\n                        db.createObjectStore(objectStoreName, {\r\n                            autoIncrement: true\r\n                        });\r\n                    }\r\n                } else {\r\n                    db.createObjectStore(objectStoreName, {\r\n                        autoIncrement: true\r\n                    });\r\n                }\r\n\r\n            };\r\n        });\r\n    }\r\n\r\n\r\n    getAll (): Promise<Array<any>> {\r\n        return new Promise((resolve, reject) => {\r\n            let transaction: IDBTransaction = this.db.transaction([this.currentObjectStoreName], 'readonly');\r\n            let objectStore: IDBObjectStore = transaction.objectStore(this.currentObjectStoreName);\r\n            let request: IDBRequest = objectStore.getAll();\r\n            request.onerror = err => reject(err);\r\n            request.onsuccess = () => resolve(request.result);\r\n        });\r\n    }\r\n\r\n    get (key: string): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            let transaction: IDBTransaction = this.db.transaction([this.currentObjectStoreName], 'readonly');\r\n            let objectStore: IDBObjectStore = transaction.objectStore(this.currentObjectStoreName);\r\n            let request: IDBRequest = objectStore.get(key);\r\n            request.onerror = err => reject(err);\r\n            request.onsuccess = () => resolve(request.result);\r\n        });\r\n    }\r\n\r\n    add (item: any, key: string): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            let transaction: IDBTransaction = this.db.transaction([this.currentObjectStoreName], 'readwrite');\r\n            let objectStore: IDBObjectStore = transaction.objectStore(this.currentObjectStoreName);\r\n            let request: IDBRequest = objectStore.add(item, key);\r\n            request.onerror = err => reject(err);\r\n            request.onsuccess = () => resolve(request.result);\r\n        });\r\n    }\r\n\r\n    put (value: any, key: string): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            let transaction: IDBTransaction = this.db.transaction([this.currentObjectStoreName], 'readwrite');\r\n            let objectStore: IDBObjectStore = transaction.objectStore(this.currentObjectStoreName);\r\n            let request: IDBRequest = objectStore.put(value, key);\r\n            request.onerror = err => reject(err);\r\n            request.onsuccess = () => resolve(request.result);\r\n        });\r\n    }\r\n\r\n\r\n\r\n    delete (id) {\r\n        return new Promise((resolve, reject) => {\r\n            let transaction = this.db.transaction([this.currentObjectStoreName], 'readwrite');\r\n            let objectStore = transaction.objectStore(this.currentObjectStoreName);\r\n            let request = objectStore.delete(id);\r\n            request.onerror = err => reject(err);\r\n            request.onsuccess = () => resolve(request.result);\r\n        });\r\n    }\r\n\r\n}\r\n","import {Router} from \"./core/router/router\";\r\nimport {routes} from \"./core/router/routes\";\r\nimport {PainterDB} from \"./DataBase/painterDB\";\r\nimport {createHeader} from \"./core/common_functions\";\r\n\r\n\r\n\r\ndocument.getElementById('homeIcon').innerHTML = `<img src=\"${require('./assets/icons/home-icon.png')}\" alt=\"Home\">`;\r\ndocument.getElementById('header').innerHTML = createHeader('');\r\n\r\n\r\n\r\nexport let dataBase = new PainterDB();\r\n\r\nexport let objectStores = [];\r\nfor (let route of routes) {\r\n    if (route.needsDB) {\r\n        objectStores.push(route.page.name);\r\n    }\r\n}\r\n\r\nlet router = new Router(routes, document.getElementById('routerContainer'));\r\nrouter.start();\r\n\r\n","module.exports = __webpack_public_path__ + \"assets/images/home-icon.65616a6b09ab9ac58c80482350871d31.png\";","module.exports = __webpack_public_path__ + \"assets/images/airplane.0d1e531d70d4a063567ffecb0e558965.png\";","module.exports = __webpack_public_path__ + \"assets/images/bird.624420c9d73a6dbf2d7bcff4e5357017.png\";","module.exports = __webpack_public_path__ + \"assets/images/car.5a16b13d0a92c7e2618ed3a76b86cd53.png\";","module.exports = __webpack_public_path__ + \"assets/images/cat.f0cd38f684f9abd5a7d8fa93c20ff02f.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cow.43f95911050b03b5e2c7eb8688f4c96c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/ezhik.55408df5d0d76340f2ced59e21703421.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/fish.aa27fff314bc1e9623d119f47db01b64.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/popugai.7daafffe1172796e3e6a8983ad42b6b8.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/train.779813e70a67599ee41546d9e3681834.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/airplane.f7ab8a75c873b14b53c1dfbea015b557.png\";","module.exports = __webpack_public_path__ + \"assets/images/bird.e59a267d8d14a356574c83fe54add3a0.png\";","module.exports = __webpack_public_path__ + \"assets/images/car.c8130e2252eb9c36ac3fb85f6d631d15.png\";","module.exports = __webpack_public_path__ + \"assets/images/cat.a53f359dfa4b2e0690ff817b7c82f611.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cow.b97b196d8d6b9555d09c552b48a6d81b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/ezhik.30ac94dd3ffdcaaf2f1b2d4408dde375.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/fish.5c963d364411733e6c66dbcdf9a551aa.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/popugai.5d145206079a2e5e4085d29953203aaa.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/train.1e8f5f035364c1c54e6cc7c9b65e52cd.jpg\";","import {ToolObject} from \"./toolObject\";\r\nimport {dataBase} from \"../../../app\";\r\nimport {OutlineImageParams} from \"../canvas_interfaces\";\r\n\r\nexport class Scene {\r\n    hasChanges: boolean = false;\r\n    items: Array<{string: ToolObject}>;\r\n    outlineImage: OutlineImageParams;\r\n\r\n    constructor(outlineImage?: OutlineImageParams) {\r\n        if (outlineImage) {\r\n            this.outlineImage = outlineImage;\r\n        }\r\n        this.items = [];\r\n    }\r\n\r\n    addChanges(curObject: ToolObject) {\r\n        //@ts-ignore\r\n        this.items.push({[curObject.constructor.name]: curObject});\r\n        this.hasChanges =true;\r\n    }\r\n\r\n    async toDataBase() {\r\n        if (this.outlineImage) {\r\n            await dataBase.put({\r\n                hasChanges: this.hasChanges,\r\n                items: this.items,\r\n                outlineImage: this.outlineImage\r\n            }, 'scene');\r\n        } else {\r\n            await dataBase.put({\r\n                hasChanges: this.hasChanges,\r\n                items: this.items\r\n            }, 'scene');\r\n        }\r\n    }\r\n\r\n}","import {ToolObject} from \"./toolObject\";\r\n\r\nexport abstract class Tool {\r\n    name: string;\r\n    icon: string;\r\n\r\n    protected constructor (name: string) {\r\n        this.name = name;\r\n//        this.iconSrc = src;\r\n    };\r\n\r\n    abstract createObject(x: number, y: number, ctx?: CanvasRenderingContext2D, canvas?: HTMLCanvasElement): ToolObject;\r\n\r\n\r\n    drawObject(object: ToolObject, x: number, y: number, shiftKey?: boolean) {\r\n    };\r\n}","import {Style} from \"../canvas_interfaces\";\r\nimport {currentStyle} from \"../currentState\";\r\n\r\nexport class ToolObject {\r\n    startX: number;\r\n    startY: number;\r\n    style: Style;\r\n    draggable: boolean;\r\n\r\n\r\n    constructor(x: number, y: number) {\r\n        this.startX = x;\r\n        this.startY = y;\r\n        this.style = Object.assign({}, currentStyle);\r\n    }\r\n\r\n    render (ctx: CanvasRenderingContext2D, canvas?: HTMLCanvasElement): void | CanvasRenderingContext2D {\r\n        ctx.fillStyle = this.style.fillColor;\r\n        ctx.strokeStyle = this.style.strokeColor;\r\n        ctx.lineWidth = this.style.strokeWidth;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}","import {Style} from \"./canvas_interfaces\";\r\nimport {dataBase} from \"../../app\";\r\n\r\nexport let currentStyle: Style = {\r\n    fillColor: '#000000',\r\n    strokeColor: '#000000',\r\n    strokeWidth: 2\r\n};\r\n\r\nexport async function setCurrentStyle (fillColor, strokeColor, strokeWidth) {\r\n    currentStyle.fillColor = fillColor;\r\n    currentStyle.strokeColor = strokeColor;\r\n    currentStyle.strokeWidth = strokeWidth;\r\n    await dataBase.put (fillColor, 'fillColor');\r\n    await dataBase.put (strokeColor, 'strokeColor');\r\n    await dataBase.put (strokeWidth, 'strokeWidth');\r\n}\r\n\r\n","import {ToolObject} from \"./common/toolObject\";\nimport {OutlineImageParams} from \"./canvas_interfaces\";\nimport {Tool} from \"./common/tool\";\nimport {loadImage, makeObjectsMap} from \"../common_functions\";\nimport {dataBase} from \"../../app\";\nimport {Constructor} from \"../router/router_interfaces\";\nimport {Scene} from \"./common/scene\";\n\nexport class Painter {\n    canvas: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D ;\n    frameId: number;\n\n    scene: Scene;\n    undoScene: Array<{string: ToolObject}> = [];\n\n    objectsMap: Map<string, Constructor<ToolObject>>;\n    currentTool: Tool;\n    currentObject: ToolObject;\n    currentOutlineImage: HTMLImageElement;\n\n    constructor (canvas: HTMLCanvasElement, tools: Array<Tool>, outlineImage?: OutlineImageParams) {\n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n        this.ctx.lineJoin = 'round';\n        this.ctx.lineCap = 'round';\n        this.canvas.addEventListener('mousedown', this);\n        this.objectsMap = makeObjectsMap(tools);\n\n        if (outlineImage) {\n            this.scene = new Scene(outlineImage);\n        } else {\n            this.scene = new Scene();\n        }\n\n        dataBase.get('scene')\n            .then((value: Scene) => {\n                if (value) {\n                    this.scene = Object.assign(this.scene, value);\n                    this.scene.hasChanges = true;\n                }\n            })\n            .then(async () => {\n                if (this.scene.outlineImage) {\n                    let {alt, src} = outlineImage;\n                    this.currentOutlineImage = await loadImage(alt, src);\n                    this.scene.hasChanges = true;\n                }\n\n                this.start();\n            })\n            .catch(err => console.log(err))\n    }\n\n    setTool (tool: Tool) {\n        this.currentTool = tool;\n    }\n\n    handleEvent (event: MouseEvent) {\n        switch (event.type) {\n        case 'mousedown':\n            return this.onMouseDown(event);\n        case 'mousemove':\n            return this.onMouseMove(event);\n        case 'mouseup':\n            return this.onMouseUp();\n        }\n    }\n\n    async onMouseDown ({offsetX, offsetY}: MouseEvent) {\n        if (this.currentTool) {\n            this.currentObject = this.currentTool.createObject(offsetX, offsetY, this.ctx, this.canvas);\n            // @ts-ignore\n            this.objectsMap.set(this.currentObject.constructor.name, this.currentObject.constructor);\n\n            this.scene.addChanges(this.currentObject);\n            await this.scene.toDataBase();\n            if (this.currentObject.draggable) {\n                this.canvas.addEventListener('mousemove', this);\n            }\n            document.addEventListener('mouseup', this);\n        }\n    }\n\n\n     onMouseMove ({offsetX, offsetY, shiftKey}: MouseEvent): void {\n        this.currentTool.drawObject(this.currentObject, offsetX, offsetY, shiftKey);\n         this.scene.hasChanges = true;\n    }\n\n    async onMouseUp () {\n        this.scene.hasChanges = true;\n        this.canvas.removeEventListener('mousemove', this);\n        document.removeEventListener('mouseup', this);\n        this.currentObject = null;\n        await this.scene.toDataBase();\n    }\n\n    render (): void {\n        if (this.scene.hasChanges) {\n            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            if (this.currentOutlineImage) {\n                this.ctx.drawImage(this.currentOutlineImage,0, 0, this.canvas.width, this.canvas.height);\n            } else {\n                this.ctx.fillStyle = 'white';\n                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n            }\n\n            if (this.scene.items) {\n                for (let item of this.scene.items) {\n                    let objectName: string = Object.keys(item)[0];\n                    let itemConstructor: Constructor<ToolObject> = this.objectsMap.get(objectName);\n                    let curItem: ToolObject = new itemConstructor(item[objectName].startX, item[objectName].startY);\n                    curItem = Object.assign(curItem, item[objectName]);\n                    curItem.render(this.ctx, this.canvas);\n                }\n            }\n        }\n\n        this.scene.hasChanges = false;\n    }\n\n    async clear() {\n        let confirmation = confirm(\" ,    ?    :)\");\n        if (confirmation) {\n            this.scene = new Scene();\n            this.scene.hasChanges = true;\n            this.currentOutlineImage = undefined;\n            await this.scene.toDataBase();\n            this.render();\n        }\n    }\n\n    start (): void {\n        this.frameId = requestAnimationFrame(() => {\n            this.render();\n            this.start();\n        });\n    }\n\n    stop (): void {\n        cancelAnimationFrame(this.frameId);\n    }\n\n    async undo() {\n        if (this.scene.items.length) {\n            this.undoScene.push(this.scene.items.pop());\n            this.scene.hasChanges = true;\n            await this.scene.toDataBase();\n            this.render();\n        }\n    }\n\n    async return() {\n        if (this.undoScene.length) {\n            this.scene.items.push(this.undoScene.pop());\n            this.scene.hasChanges = true;\n            await this.scene.toDataBase();\n            this.render();\n        }\n    }\n\n    destroy () {\n        this.stop();\n        this.canvas.removeEventListener('mousedown', this);\n    }\n\n    export (): Promise<Blob> {\n        return new Promise(resolve => {\n            this.canvas.toBlob(blob => resolve(blob));\n        });\n    }\n}\n","import {Tool} from \"../../common/tool\";\r\nimport {EllipseObject} from \"./ellipseObject\";\r\nimport {ellipseIcon} from \"./ellipseIcon\";\r\n\r\nexport class Ellipse extends Tool{\r\n    icon = ellipseIcon;\r\n\r\n    constructor() {\r\n        super('ellipse');\r\n    }\r\n\r\n    createObject(x: number, y: number): EllipseObject {\r\n        return new EllipseObject(x, y);\r\n    }\r\n\r\n    drawObject(object: EllipseObject, x: number, y: number, shiftKey: boolean): void {\r\n        object.addItem(x, y, shiftKey);\r\n    }\r\n}","export let ellipseIcon = `\r\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\">\r\n<g>\r\n\t<g>\r\n\t\t<path d=\"M256,51C117.03,51,0,140.526,0,256s117.035,205,256,205c138.97,0,256-89.526,256-205S394.965,51,256,51z M256,431\r\n\t\t\tc-124.617,0-226-78.505-226-175S131.383,81,256,81s226,78.505,226,175S380.617,431,256,431z\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n</svg>\r\n`;","import {ToolObject} from \"../../common/toolObject\";\r\n\r\nexport class EllipseObject extends ToolObject{\r\n    xCenter: number;\r\n    yCenter: number;\r\n    radiusX: number;\r\n    radiusY: number;\r\n    rotation = Math.PI / 2;\r\n    startAngle = 0;\r\n    endAngle = Math.PI * 2;\r\n    draggable: boolean = true;\r\n\r\n    constructor(x: number, y: number) {\r\n        super(x, y);\r\n        this.xCenter = this.startX;\r\n        this.yCenter = this.startY;\r\n    }\r\n\r\n    addItem(x: number, y: number, shiftKey: boolean): void {\r\n        this.radiusX = Math.abs((x - this.startX));\r\n\r\n        if (!shiftKey) {\r\n            this.radiusY = Math.abs(y - this.startY);\r\n        } else {\r\n            this.radiusY = this.radiusX;\r\n        }\r\n    }\r\n\r\n    render(ctx: CanvasRenderingContext2D): void {\r\n        super.render(ctx);\r\n        ctx.beginPath();\r\n        ctx.ellipse(this.xCenter, this.yCenter, this.radiusX, this.radiusY, this.rotation, this.startAngle, this.endAngle);\r\n        ctx.fill();\r\n        ctx.stroke();\r\n    }\r\n\r\n\r\n}","import {Tool} from \"../../common/tool\";\r\nimport {EraserObject} from \"./eraserObject\";\r\nimport {eraserIcon} from \"./eraserIcon\";\r\n\r\nexport class Eraser extends Tool{\r\n    icon = eraserIcon;\r\n\r\n    constructor() {\r\n        super('eraser');\r\n    }\r\n\r\n    createObject(x: number, y: number): EraserObject {\r\n        return new EraserObject(x, y);\r\n    }\r\n\r\n    drawObject(object: EraserObject, x: number, y: number): void {\r\n        object.addPoint(x, y);\r\n    }\r\n}","export let eraserIcon = `<svg viewBox=\"0 -25 512.00075 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m379.203125 431.960938h-85.929687l-30.003907 30.003906h115.933594c8.285156 0 15.003906-6.71875 15.003906-15 0-8.285156-6.71875-15.003906-15.003906-15.003906zm0 0\"/><path d=\"m345.253906 4.394531c-2.8125-2.8125-6.628906-4.394531-10.609375-4.394531-3.976562 0-7.792969 1.582031-10.605469 4.394531l-190.765624 190.765625c-5.855469 5.855469-5.855469 15.355469 0 21.214844l162.355468 162.351562c2.929688 2.929688 6.769532 4.394532 10.605469 4.394532 3.839844 0 7.679687-1.464844 10.609375-4.394532l190.761719-190.761718c5.859375-5.859375 5.859375-15.359375 0-21.214844zm0 0\"/><path d=\"m278.691406 404.113281-53.457031 53.457031c-2.8125 2.8125-6.625 4.394532-10.605469 4.394532l-149.601562.011718c-3.980469 0-7.796875-1.578124-10.609375-4.394531l-32.566407-32.566406c-29.136718-29.132813-29.136718-76.535156 0-105.667969l86.035157-86.039062zm0 0\"/></svg>`;","\r\nimport {LineObject} from \"../line/lineObject\";\r\n\r\nexport class EraserObject extends LineObject{\r\n\r\n    points: Array<Array<number>> = [];\r\n    draggable: boolean = true;\r\n\r\n    constructor(x: number, y: number) {\r\n        super(x, y);\r\n        this.points.push([this.startX, this.startY]);\r\n        this.style.strokeColor = '#fff'\r\n    }\r\n\r\n\r\n\r\n\r\n}","import {Tool} from \"../../common/tool\";\r\nimport {FillerObject} from \"./fillerObject\";\r\nimport {fillerIcon} from \"./fillerIcon\";\r\n\r\nexport class Filler extends Tool{\r\n    icon = fillerIcon;\r\n\r\n    constructor() {\r\n        super('filler');\r\n    }\r\n\r\n    createObject(x: number, y: number, ctx?: CanvasRenderingContext2D, canvas?: HTMLCanvasElement): FillerObject {\r\n        return new FillerObject(x, y, ctx, canvas);\r\n    }\r\n\r\n    /*drawObject(object: FillerObject, x: number, y: number): void {\r\n        object.makeFilling(x, y);\r\n    }*/\r\n}","export let fillerIcon = `\r\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t viewBox=\"0 0 383.344 383.345\" style=\"enable-background:new 0 0 383.344 383.345;\"\r\n\t xml:space=\"preserve\">\r\n<g>\r\n\t<path d=\"M273.217,106.899c-27.181-44.864-57.413-83.693-73.016-102.846c-2.088-2.565-5.221-4.054-8.528-4.053\r\n\t\tc-3.308,0-6.44,1.489-8.529,4.054c-15.602,19.159-45.834,58.001-73.015,102.869c-35.028,57.823-52.789,105.63-52.789,142.09\r\n\t\tc0,74.071,60.261,134.332,134.332,134.332s134.332-60.261,134.332-134.332C326.005,212.529,308.246,164.715,273.217,106.899z\r\n\t\t M210.106,333.868c-7.844,2.006-15.986,3.022-24.205,3.022c-50.186,0-91.015-37.929-91.015-84.55\r\n\t\tc0-11.255,2.97-24.405,8.825-39.083c0.989-2.48,3.807-3.895,6.585-3.295c2.776,0.598,4.64,3.018,4.354,5.65\r\n\t\tc-0.342,3.148-0.516,6.223-0.516,9.136c0,50.735,40.881,93.221,95.093,98.821c2.698,0.279,4.803,2.297,5.018,4.812\r\n\t\tC214.461,330.896,212.723,333.198,210.106,333.868z\"/>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n</svg>\r\n`;","import {ToolObject} from \"../../common/toolObject\";\r\nimport {RGBColor} from \"../../canvas_interfaces\";\r\n\r\nexport class FillerObject extends ToolObject{\r\n\r\n    draggable: boolean = false;\r\n    pixelStack: Array<Array<number>>;\r\n    fillColor: RGBColor;\r\n    colorLayer: ImageData;\r\n\r\n    constructor(x: number, y: number, ctx?: CanvasRenderingContext2D, canvas?: HTMLCanvasElement) {\r\n        super(x, y);\r\n        this.pixelStack = [[this.startX, this.startY]];\r\n        this.fillColor = this.divideRgb(this.style.fillColor) || this.hexToRgb (this.style.fillColor);\r\n        if (ctx && canvas) {\r\n            this.colorLayer = this.changeColorLayer(ctx, canvas);\r\n        }\r\n    }\r\n\r\n    private hexToRgb (hex: string): RGBColor {\r\n        let shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n        hex = hex.replace(shorthandRegex, function(m, r, g, b) {\r\n            return r + r + g + g + b + b;\r\n        });\r\n\r\n        let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : null;\r\n    }\r\n\r\n    private divideRgb(color) {\r\n        let result = /^rgb\\((\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\)/i.exec(color);\r\n        return result ? {\r\n            r: parseInt(result[1]),\r\n            g: parseInt(result[2]),\r\n            b: parseInt(result[3])\r\n        } : null;\r\n    }\r\n\r\n\r\n    render(ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement)/*: void*/ {\r\n        super.render(ctx);\r\n        //let newColorLayer = this.changeColorLayer(ctx, canvas);\r\n\r\n        ctx.putImageData(this.colorLayer, 0, 0);\r\n        return ctx;\r\n\r\n    }\r\n\r\n    private changeColorLayer(ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement): ImageData {\r\n        let colorLayer: ImageData = ctx.getImageData(0, 0, canvas.width, canvas.height),\r\n            startPixelPosition = (this.startY*canvas.width + this.startX) * 4,\r\n            startR = colorLayer.data[startPixelPosition],\r\n            startG = colorLayer.data[startPixelPosition + 1],\r\n            startB = colorLayer.data[startPixelPosition + 2];\r\n\r\n        let pixelStack = this.pixelStack.slice(0),\r\n            fillColor = this.fillColor;\r\n\r\n        function matchStartColor(pixelPos: number): boolean {\r\n            let r = colorLayer.data[pixelPos];\r\n            let g = colorLayer.data[pixelPos+1];\r\n            let b = colorLayer.data[pixelPos+2];\r\n\r\n            return (r == startR && g == startG && b == startB);\r\n        }\r\n\r\n        function colorPixel(pixelPos: number): void {\r\n            colorLayer.data[pixelPos] = fillColor.r;\r\n            colorLayer.data[pixelPos+1] = fillColor.g;\r\n            colorLayer.data[pixelPos+2] = fillColor.b;\r\n            colorLayer.data[pixelPos+3] = 255;\r\n        }\r\n\r\n        let newPos, x, y, pixelPos, reachLeft, reachRight;\r\n\r\n        while (pixelStack.length) {\r\n\r\n            newPos = pixelStack.pop();\r\n            x = newPos[0];\r\n            y = newPos[1];\r\n\r\n            pixelPos = (y * canvas.width + x) * 4;\r\n\r\n            while (y >= 0 && matchStartColor(pixelPos)) {\r\n                pixelPos -= canvas.width * 4;\r\n                y--;\r\n            }\r\n\r\n            pixelPos += canvas.width * 4;\r\n            ++y;\r\n            reachLeft = false;\r\n            reachRight = false;\r\n\r\n            while(y <= canvas.height-1 && matchStartColor(pixelPos)) {\r\n                colorPixel(pixelPos);\r\n\r\n                if(x >= 1) {\r\n                    if(matchStartColor(pixelPos - 4)) {\r\n                        if(!reachLeft) {\r\n                            pixelStack.push([x - 1, y]);\r\n                            reachLeft = true;\r\n                        }\r\n                    } else if(reachLeft) {\r\n                        reachLeft = false;\r\n                    }\r\n                }\r\n\r\n                if(x < canvas.width-1) {\r\n                    if(matchStartColor(pixelPos + 4)) {\r\n                        if(!reachRight) {\r\n                            pixelStack.push([x + 1, y]);\r\n                            reachRight = true;\r\n                        }\r\n                    } else if(reachRight) {\r\n                        reachRight = false;\r\n                    }\r\n                }\r\n\r\n                pixelPos += canvas.width * 4;\r\n                y++;\r\n            }\r\n        }\r\n        return colorLayer;\r\n    }\r\n\r\n}","import {Tool} from \"../../common/tool\";\r\nimport {LineObject} from \"./lineObject\";\r\nimport {lineIcon} from \"./lineIcon\";\r\n\r\nexport class Line extends Tool{\r\n    icon = lineIcon;\r\n\r\n    constructor() {\r\n        super('line');\r\n    }\r\n\r\n    createObject(x: number, y: number): LineObject {\r\n        return new LineObject(x, y);\r\n    }\r\n\r\n    drawObject(object: LineObject, x: number, y: number): void {\r\n        object.addPoint(x, y);\r\n    }\r\n}","export let lineIcon = `\r\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\">\r\n<g>\r\n\t<g>\r\n\t\t<path d=\"M505.025,19.549c-14.688-14.686-44.146-6.307-92.708,26.377c-41.254,27.766-90.738,69.819-139.336,118.417\r\n\t\t\tc-72.047,72.046-126.823,142.784-145.061,186.458c-3.002-1.088-6.115-1.958-9.327-2.593c-18.872-3.733-39.369,1.04-56.238,13.086\r\n\t\t\tc-24.207,17.286-30.618,41.971-31.549,46.132c-5.096,19.032-14.747,37.191-27.921,52.529c-4.237,4.933-3.753,12.349,1.09,16.691\r\n\t\t\tc16.927,15.17,38.58,22.779,61.102,22.779c21.706,0,44.22-7.069,64.077-21.249c9.311-6.649,16.36-14.001,17.725-15.456\r\n\t\t\tc16.872-18.131,24.036-41.904,20.482-63.625c42.85-15.361,117.553-72.181,192.871-147.499\r\n\t\t\tc48.598-48.598,90.652-98.083,118.417-139.336C511.332,63.696,519.713,34.238,505.025,19.549z M129.392,446.415\r\n\t\t\tc-0.642,0.685-6.495,6.852-14.13,12.302c-27.732,19.8-61.684,22.09-86.345,6.845c11.549-15.834,20.132-33.683,25.063-52.254\r\n\t\t\tv-0.001c0.055-0.208,0.105-0.418,0.149-0.63c0.041-0.189,4.193-19.127,22.119-31.927c11.53-8.235,25.277-11.547,37.711-9.089\r\n\t\t\tc10.255,2.026,18.876,7.88,24.275,16.48C148.829,405.018,145.104,429.532,129.392,446.415z M159.217,376.663\r\n\t\t\tc-0.245-0.41-3.87-7.77-10.624-13.24c5.819-15.557,18.346-36.584,35.806-60.729l37.455,37.455\r\n\t\t\tC195.505,359.116,173.914,371.48,159.217,376.663z M241.198,325.685l-42.301-42.301c7.31-9.41,15.219-19.157,23.648-29.127\r\n\t\t\tl47.806,47.806C260.233,310.608,250.489,318.493,241.198,325.685z M455.159,104.266c-26.926,38.916-66.643,85.235-111.832,130.422\r\n\t\t\tc-18.973,18.973-37.367,36.232-54.844,51.694l-50.257-50.257c15.94-18.032,33.32-36.538,51.661-54.877\r\n\t\t\tc45.188-45.189,91.507-84.905,130.422-111.834c47.916-33.155,64.45-33.208,67.626-32.774\r\n\t\t\tC488.371,39.813,488.313,56.353,455.159,104.266z\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n\t<g>\r\n\t\t<path d=\"M119.256,414.119c-5.783-3.183-13.052-1.076-16.236,4.708c-0.322,0.585-0.711,1.132-1.158,1.626\r\n\t\t\tc-0.894,0.93-3.832,3.77-6.884,5.951c-4.63,3.305-9.626,5.674-14.85,7.041c-6.387,1.671-10.209,8.203-8.538,14.59\r\n\t\t\tc1.406,5.372,6.25,8.93,11.555,8.93c1.002,0,2.019-0.127,3.034-0.391c8.049-2.106,15.684-5.71,22.693-10.714\r\n\t\t\tc4.499-3.213,10.471-9.095,10.512-9.14c1.777-1.927,3.319-4.069,4.583-6.366C127.149,424.57,125.04,417.301,119.256,414.119z\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n</svg>\r\n`;","import {ToolObject} from \"../../common/toolObject\";\r\n\r\nexport class LineObject extends ToolObject{\r\n\r\n    points: Array<Array<number>> = [];\r\n    draggable: boolean = true;\r\n\r\n    constructor(x: number, y: number) {\r\n        super(x, y);\r\n        this.points.push([this.startX, this.startY]);\r\n    }\r\n\r\n\r\n    addPoint(x: number, y: number): void {\r\n        this.points.push([x, y]);\r\n    }\r\n\r\n    render(ctx: CanvasRenderingContext2D): void {\r\n        super.render(ctx);\r\n        ctx.beginPath();\r\n        for (let [index, [x, y]] of this.points.entries()) {\r\n            if (index === 0) {\r\n                ctx.moveTo(x, y);\r\n            } else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n}","import {Tool} from \"../../common/tool\";\r\nimport {RectObject} from \"./rectObject\";\r\nimport {rectIcon} from \"./rectIcon\";\r\n\r\nexport class Rect extends Tool {\r\n    icon = rectIcon;\r\n\r\n    constructor() {\r\n        super('rect');\r\n    }\r\n\r\n    createObject(x: number, y: number) {\r\n        return new RectObject(x, y);\r\n    }\r\n\r\n    drawObject(object: RectObject, x: number, y: number, shiftKey: boolean) {\r\n        object.addItem(x, y, shiftKey);\r\n    }\r\n}","export let rectIcon = `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\">\r\n<g>\r\n\t<g>\r\n\t\t<path d=\"M497,76H15C6.716,76,0,82.716,0,91v330c0,8.284,6.716,15,15,15h482c8.284,0,15-6.716,15-15V91\r\n\t\t\tC512,82.716,505.284,76,497,76z M482,406H30V106h452V406z\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n</svg>\r\n`;","import {ToolObject} from \"../../common/toolObject\";\r\n\r\nexport class RectObject extends ToolObject{\r\n    x: number;\r\n    y: number;\r\n    width: number = 0;\r\n    height: number = 0;\r\n    draggable: boolean = true;\r\n\r\n    constructor(x: number, y: number) {\r\n        super(x, y);\r\n        this.x = this.startX;\r\n        this.y = this.startY;\r\n    }\r\n\r\n    addItem(x: number, y: number, shiftKey: boolean): void {\r\n        this.x = Math.min(this.startX, x);\r\n        this.y = Math.min(this.startY, y);\r\n        this.width = Math.abs(this.startX - x);\r\n\r\n        if (!shiftKey) {\r\n            this.height = Math.abs(this.startY - y);\r\n        } else {\r\n            this.height = this.width;\r\n        }\r\n    }\r\n\r\n    render(ctx: CanvasRenderingContext2D): void {\r\n        super.render(ctx);\r\n        ctx.beginPath();\r\n        ctx.rect(this.x, this.y, this.width, this.height);\r\n        ctx.fill();\r\n        ctx.stroke();\r\n    }\r\n\r\n\r\n}","import {Tool} from \"../../common/tool\";\r\nimport {StraightLineObject} from \"./straightLineObject\";\r\nimport {straightLineIcon} from \"./straightLineIcon\";\r\n\r\nexport class StraightLine extends Tool{\r\n    icon = straightLineIcon;\r\n\r\n    constructor() {\r\n        super('straightLine');\r\n    }\r\n\r\n    createObject(x: number, y: number): StraightLineObject {\r\n        return new StraightLineObject(x, y);\r\n    }\r\n\r\n    drawObject(object: StraightLineObject, x: number, y: number): void {\r\n        object.changeEndPoint(x, y);\r\n    }\r\n}","export let straightLineIcon = `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t viewBox=\"0 0 512.001 512.001\" style=\"enable-background:new 0 0 512.001 512.001;\" xml:space=\"preserve\">\r\n<g>\r\n\t<g>\r\n\t\t<path d=\"M457.637,134.681c-29.976,0-54.363,24.387-54.363,54.363c0,10.933,3.255,21.114,8.831,29.647l-58.733,58.733\r\n\t\t\tc-8.534-5.576-18.715-8.831-29.648-8.831c-11.329,0-21.858,3.488-30.576,9.441l-59.338-59.347\r\n\t\t\tc5.575-8.533,8.828-18.713,8.828-29.644c0-29.976-24.387-54.363-54.363-54.363c-29.976,0-54.363,24.387-54.363,54.363\r\n\t\t\tc0,10.931,3.254,21.108,8.827,29.641L84.004,277.42c-8.532-5.574-18.711-8.827-29.641-8.827C24.387,268.593,0,292.981,0,322.957\r\n\t\t\ts24.387,54.363,54.363,54.363c29.976,0,54.363-24.387,54.363-54.363c0-10.933-3.255-21.114-8.831-29.648l58.733-58.733\r\n\t\t\tc8.534,5.576,18.715,8.831,29.648,8.831c10.932,0,21.113-3.255,29.646-8.831l59.666,59.674\r\n\t\t\tc-5.206,8.338-8.226,18.174-8.226,28.706c0,29.976,24.387,54.363,54.363,54.363s54.363-24.387,54.363-54.363\r\n\t\t\tc0-10.931-3.254-21.109-8.827-29.641l58.736-58.736c8.533,5.574,18.712,8.827,29.641,8.827c29.976,0,54.363-24.387,54.363-54.363\r\n\t\t\tC512.001,159.066,487.613,134.681,457.637,134.681z M54.363,354.849c-17.586,0-31.893-14.307-31.893-31.892\r\n\t\t\tc0-17.586,14.307-31.893,31.893-31.893c17.585,0,31.893,14.307,31.893,31.893C86.256,340.542,71.949,354.849,54.363,354.849z\r\n\t\t\t M188.276,220.936c-17.585,0-31.893-14.307-31.893-31.893c0-17.585,14.307-31.893,31.893-31.893\r\n\t\t\tc17.586,0,31.893,14.307,31.893,31.893C220.169,206.629,205.862,220.936,188.276,220.936z M323.724,354.849\r\n\t\t\tc-17.585,0-31.893-14.307-31.893-31.893s14.307-31.893,31.893-31.893c17.585,0,31.893,14.307,31.893,31.893\r\n\t\t\tC355.616,340.542,341.309,354.849,323.724,354.849z M457.637,220.936c-17.585,0-31.893-14.307-31.893-31.893\r\n\t\t\tc0-17.585,14.307-31.893,31.893-31.893c17.585,0,31.893,14.307,31.893,31.893C489.53,206.629,475.222,220.936,457.637,220.936z\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n\t<g>\r\n\t\t<path d=\"M176.774,272.717c-4.388-4.387-11.501-4.387-15.889,0l-22.854,22.854c-4.387,4.387-4.387,11.501,0.001,15.889\r\n\t\t\tc2.194,2.194,5.069,3.291,7.944,3.291s5.751-1.098,7.944-3.291l22.854-22.854C181.163,284.219,181.163,277.104,176.774,272.717z\"\r\n\t\t\t/>\r\n\t</g>\r\n</g>\r\n<g>\r\n\t<g>\r\n\t\t<path d=\"M373.962,200.939c-4.388-4.387-11.5-4.387-15.89,0.001l-22.854,22.854c-4.387,4.387-4.387,11.501,0,15.889\r\n\t\t\tc2.195,2.193,5.07,3.29,7.945,3.29c2.876,0,5.75-1.098,7.944-3.291l22.854-22.854C378.349,212.44,378.349,205.326,373.962,200.939\r\n\t\t\tz\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n</svg>\r\n`;","import {ToolObject} from \"../../common/toolObject\";\r\n\r\nexport class StraightLineObject extends ToolObject{\r\n\r\n    startPoint: Array<number>;\r\n    endPoint: Array<number>;\r\n    draggable: boolean = true;\r\n\r\n    constructor(x: number, y: number) {\r\n        super(x, y);\r\n        this.startPoint = this.endPoint = [this.startX, this.startY];\r\n    }\r\n\r\n\r\n    changeEndPoint(x: number, y: number): void {\r\n        this.endPoint = [x, y];\r\n    }\r\n\r\n    render(ctx: CanvasRenderingContext2D): void {\r\n        super.render(ctx);\r\n        ctx.beginPath();\r\n        // @ts-ignore\r\n        ctx.moveTo(...this.startPoint);\r\n        // @ts-ignore\r\n        ctx.lineTo(...this.endPoint);\r\n\r\n        ctx.stroke();\r\n    }\r\n\r\n}","import {Tool} from \"./canvas/common/tool\";\r\nimport {Constructor} from \"./router/router_interfaces\";\r\nimport {ToolObject} from \"./canvas/common/toolObject\";\r\n\r\nexport function createHeader(name: string): string {\r\n    let pageName: string[] = name.split(''),\r\n        counter: number = 1,\r\n        newPageName: string[] = [];\r\n    for (let letter of pageName) {\r\n        if (counter > 7) {\r\n            counter = 1;\r\n        }\r\n        if (letter === ' ') {\r\n            letter = `<span class=\"space\"></span>`;\r\n        } else {\r\n            letter = `<span class=\"letter-${counter++}\">${letter.toUpperCase()} </span>`;\r\n        }\r\n        newPageName.push(letter);\r\n    }\r\n    return newPageName.join('');\r\n}\r\n\r\nexport function loadImage(alt: string, src: string): Promise<HTMLImageElement> {\r\n    return new Promise((resolve, reject) => {\r\n        let img: HTMLImageElement = new Image();\r\n        img.onload = () => resolve(img);\r\n        img.onerror = err => reject(err);\r\n        img.src = src;\r\n        img.alt = alt;\r\n    });\r\n}\r\n\r\nexport async function createGallery(srcArr: Array<Array<string>>) {\r\n    return await srcArr.reduce(async (promise: Promise<DocumentFragment>, [alt, src]) => {\r\n        let counter = 1;\r\n        return promise.then(async (fragment) => {\r\n            let img = await loadImage(alt, src);\r\n            let figure = document.createElement('figure');\r\n            figure.tabIndex = counter++;\r\n            let figcaption = document.createElement('figcaption');\r\n            figcaption.innerHTML = alt;\r\n            figure.append(img, figcaption);\r\n            fragment.append(figure);\r\n            return fragment;\r\n        })\r\n    }, Promise.resolve(document.createDocumentFragment()))\r\n};\r\n\r\nexport function makeObjectsMap (tools: Array<Tool>): Map<string, Constructor<ToolObject>> {\r\n    let map = new Map();\r\n    for (let tool of tools) {\r\n        let object = tool.createObject(0,0);\r\n        map.set(object.constructor.name, object.constructor)\r\n    }\r\n    return map;\r\n}","\r\nexport abstract class Page {\r\n\r\n    pageParams: object;\r\n    resolvedData: any;\r\n    htmlAddress: string;\r\n    objectStoreName: string = this.constructor.name;\r\n\r\n    constructor(params: object) {\r\n        this.pageParams = params;\r\n    }\r\n\r\n    async load() {\r\n        this.resolvedData = await this.resolve();\r\n    }\r\n\r\n    async resolve(): Promise<any> {\r\n        return {\r\n            template: await fetch(this.htmlAddress).then(res => res.text())\r\n        };\r\n    }\r\n\r\n    beforeRender(){};\r\n\r\n    afterRender(){};\r\n\r\n    render() {\r\n        return this.resolvedData.template;\r\n    }\r\n\r\n    destroy() {\r\n        this.resolvedData = null;\r\n    };\r\n}","import {Page} from \"./page\";\r\nimport {Constructor} from \"./router_interfaces\";\r\n\r\n\r\nexport class Router {\r\n\r\n    routes: Array<{path: string, page: Constructor<Page>}>;\r\n    currentPage: Page;\r\n    container: HTMLElement;\r\n    originalLocation: string;\r\n\r\n    constructor(routes: Array<{path: string, page: Constructor<Page>}>, el: HTMLElement) {\r\n        this.container = el;\r\n        this.routes = routes;\r\n\r\n        this.currentPage = null;\r\n    }\r\n\r\n    async start() {\r\n        window.addEventListener('popstate', this);\r\n\r\n        await this.handleState(location.pathname);\r\n    }\r\n\r\n    stop(): void {\r\n        window.removeEventListener('popstate', this);\r\n    }\r\n\r\n    async handleEvent(event: PopStateEvent) {\r\n\r\n            let route = this.routes.find(route => route.path === event.state);\r\n            if (route) {\r\n                await this.startPage(route.page);\r\n\r\n        }\r\n    }\r\n\r\n    async handleState(path: string) {\r\n        let route = this.routes.find(route => route.path === path);\r\n        if (route) {\r\n            window.history.pushState(path, null, path);\r\n\r\n            await this.startPage(route.page);\r\n        }\r\n    }\r\n\r\n    async startPage(PageConstructor: Constructor<Page>, params?: object) {\r\n        if (this.currentPage) {\r\n            await this.currentPage.destroy();\r\n        }\r\n        // @ts-ignore\r\n        this.currentPage = new PageConstructor();\r\n        await this.currentPage.load();\r\n        await this.currentPage.beforeRender();\r\n        this.container.innerHTML = await this.currentPage.render();\r\n        await this.currentPage.afterRender();\r\n        this.arrangeATags();\r\n    }\r\n\r\n    arrangeATags() {\r\n        let aTags = document.getElementsByTagName('a');\r\n        for (let a of aTags) {\r\n            a.onclick = async (e) => {\r\n                e.preventDefault();\r\n                //window.history.pushState(null, null, a.getAttribute('href'));\r\n                await this.handleState(a.getAttribute('href'));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n/*export class Router {\r\n\r\n    routes: Array<{path: RegExp, page: Constructor<Page>}>;\r\n    currentPage: Page;\r\n    container: HTMLElement;\r\n\r\n    constructor(routes: Array<{path: string, page: Constructor<Page>}>, el: HTMLElement) {\r\n        this.container = el;\r\n        this.routes = routes.map(({path, page}) => {\r\n            return {\r\n                page,\r\n                path: createPathRegExp(path)\r\n            }\r\n        });\r\n\r\n        this.currentPage = null;\r\n    }\r\n\r\n    start(): void {\r\n        window.addEventListener('hashchange', this);\r\n        this.handleHash(location.hash);\r\n    }\r\n\r\n    stop(): void {\r\n        window.removeEventListener('hashchange', this);\r\n    }\r\n\r\n    handleEvent(event: HashChangeEvent) {\r\n        event.preventDefault();\r\n        window.scrollTo(0, 0);\r\n        this.handleHash(location.hash);\r\n    }\r\n\r\n    handleHash(hash: string) {\r\n        let route = this.routes.find(route => route.path.test(hash));\r\n        if (route) {\r\n            let params = {...route.path.exec(hash).groups};\r\n            this.startPage(route.page, params);\r\n\r\n            console.log(document.location);\r\n        }\r\n    }\r\n\r\n    async startPage(PageConstructor: Constructor<Page>, params: object) {\r\n        if (this.currentPage) {\r\n            await this.currentPage.destroy();\r\n        }\r\n        // @ts-ignore\r\n        this.currentPage = new PageConstructor(params);\r\n        await this.currentPage.load();\r\n        await this.currentPage.beforeRender();\r\n        this.container.innerHTML = await this.currentPage.render();\r\n        await this.currentPage.afterRender();\r\n    }\r\n}\r\n\r\nfunction createPathRegExp(path: string): RegExp {\r\n    return new RegExp(\r\n        `^#?${\r\n            path.split('/')\r\n                .map(fragment => {\r\n                    if (fragment.charAt(0) === ':') {\r\n                        return `(<${fragment.substr(1)}>[^/]+)`\r\n                    } else {\r\n                        return fragment;\r\n                    }\r\n\r\n                })\r\n                .join('/')\r\n            }$`,\r\n        'i'\r\n    );\r\n}*/\r\n","import {HomePage} from \"../../pages/home/home-page\";\r\nimport {ColouringPage} from \"../../pages/colouring/colouring-page\";\r\nimport {MyPaintingsPage} from \"../../pages/my-paintings/my_paintings-page\";\r\nimport {PaintingPage} from \"../../pages/painting/painting-page\";\r\nimport {ChooseImagePage} from \"../../pages/choose-image/choose-image-page\";\r\nimport {Page} from \"./page\";\r\nimport {Constructor} from \"./router_interfaces\";\r\n\r\n\r\nexport const routes: Array<{path: string, page: Constructor<Page>, needsDB: boolean}> = [\r\n    {\r\n        path: '/',\r\n        page: HomePage,\r\n        needsDB: false\r\n    },\r\n   {\r\n        path: '/home',\r\n        page: HomePage,\r\n        needsDB: false\r\n    },\r\n\r\n    {\r\n        path: '/colouring',\r\n        page: ColouringPage,\r\n        needsDB: true\r\n    },\r\n\r\n    {\r\n        path: '/painting',\r\n        page: PaintingPage,\r\n        needsDB: true\r\n    },\r\n\r\n    {\r\n        path: '/my_paintings',\r\n        page: MyPaintingsPage,\r\n        needsDB: true\r\n    },\r\n\r\n    {\r\n        path: '/choose_image',\r\n        page: ChooseImagePage,\r\n        needsDB: false\r\n    }\r\n];","module.exports = __webpack_public_path__ + \"pages/choose-image-page.502f258b3b25810f3904f3ba84d2683a.html\";","import {Page} from \"../../core/router/page\";\r\nimport {createGallery, createHeader} from \"../../core/common_functions\";\r\nimport {ColouringPage} from \"../colouring/colouring-page\";\r\nimport {dataBase, objectStores} from \"../../app\";\r\nimport {Scene} from \"../../core/canvas/common/scene\";\r\n\r\n\r\n\r\nexport class ChooseImagePage extends Page {\r\n    htmlAddress = require('./choose-image-page.html');\r\n    currentImage: HTMLImageElement;\r\n\r\n\r\n    render() {\r\n        return this.resolvedData.template;\r\n    }\r\n\r\n    afterRender() {\r\n        document.getElementById('header').innerHTML = createHeader(' ');\r\n\r\n        let chooseImageBtn = <HTMLButtonElement> document.getElementById('chooseImageBtn'),\r\n            addImageBtn = <HTMLButtonElement> document.getElementById('addImageBtn');\r\n\r\n        const SMALL_IMAGES_MAP: Map<string, string> = new Map([\r\n            ['', require(\"../../assets/images/small/airplane.png\")],\r\n            ['', require(\"../../assets/images/small/car.png\")],\r\n            ['', require(\"../../assets/images/small/cat.jpg\")],\r\n            ['', require(\"../../assets/images/small/ezhik.jpg\")],\r\n            ['', require(\"../../assets/images/small/fish.jpg\")],\r\n            ['', require(\"../../assets/images/small/bird.png\")],\r\n            ['', require(\"../../assets/images/small/cow.jpg\")],\r\n            ['', require(\"../../assets/images/small/popugai.jpg\")],\r\n            ['', require(\"../../assets/images/small/train.jpg\")]\r\n\r\n        ]);\r\n\r\n        const LARGE_IMAGES_MAP: Map<string, string> = new Map([\r\n            ['', require(\"../../assets/images/large/airplane.png\")],\r\n            ['', require(\"../../assets/images/large/car.png\")],\r\n            ['', require(\"../../assets/images/large/cat.jpg\")],\r\n            ['', require(\"../../assets/images/large/ezhik.jpg\")],\r\n            ['', require(\"../../assets/images/large/fish.jpg\")],\r\n            ['', require(\"../../assets/images/large/bird.png\")],\r\n            ['', require(\"../../assets/images/large/cow.jpg\")],\r\n            ['', require(\"../../assets/images/large/popugai.jpg\")],\r\n            ['', require(\"../../assets/images/large/train.jpg\")],\r\n        ]);\r\n\r\n       let galleryEl: HTMLTableSectionElement = document.querySelector('.gallery');\r\n\r\n       createGallery([...SMALL_IMAGES_MAP.entries()])\r\n            .then((fragment: DocumentFragment) => galleryEl.append(fragment));\r\n\r\n\r\n        galleryEl.addEventListener('click', (event: MouseEvent) => {\r\n            //@ts-ignore\r\n            let imageEl = event.target.closest('img');\r\n            if (imageEl) {\r\n                this.currentImage = imageEl;\r\n            }\r\n        });\r\n\r\n        chooseImageBtn.addEventListener('click', async () => {\r\n            if (this.currentImage) {\r\n                let imageAlt: string = this.currentImage.alt;\r\n                ColouringPage.outlineImage = {alt: imageAlt, src: LARGE_IMAGES_MAP.get(imageAlt)};\r\n                await dataBase.init('ColouringPage');\r\n                await dataBase.put(new Scene(ColouringPage.outlineImage), 'scene');\r\n\r\n                let outerPage = '/colouring';\r\n                history.pushState(outerPage, null, outerPage);\r\n                history.pushState(outerPage, null, outerPage);\r\n                history.back();\r\n\r\n            }\r\n        });\r\n\r\n        /*addImageBtn.addEventListener('click', async () => {\r\n            if (this.currentImage) {\r\n                this.currentImage.closest('figure').remove();\r\n\r\n                await dataBase.delete(this.currentImage.src);\r\n            }\r\n        });*/\r\n\r\n    }\r\n}","module.exports = __webpack_public_path__ + \"pages/colouring-page.775efc248ee9276ae8c7a88956776f42.html\";","import {createHeader} from \"../../core/common_functions\";\nimport {Tool} from \"../../core/canvas/common/tool\";\nimport {Line} from \"../../core/canvas/tools/line/line\";\nimport {Painter} from \"../../core/canvas/painter\";\nimport {dataBase} from \"../../app\";\nimport {PaintingPage} from \"../painting/painting-page\";\nimport {OutlineImageParams} from \"../../core/canvas/canvas_interfaces\";\nimport {Scene} from \"../../core/canvas/common/scene\";\nimport {Filler} from \"../../core/canvas/tools/filler/filler\";\nimport {Eraser} from \"../../core/canvas/tools/eraser/eraser\";\nimport {StraightLine} from \"../../core/canvas/tools/straight_line/straightLine\";\nimport {currentStyle, setCurrentStyle} from \"../../core/canvas/currentState\";\n\nexport class ColouringPage extends PaintingPage {\n    htmlAddress = require('./colouring-page.html');\n    static outlineImage: OutlineImageParams;\n    activeColorBlock: HTMLDivElement;\n    activeCurColorEl: HTMLDivElement;\n\n   async beforeRender(){\n       await super.beforeRender();\n       let curScene: Scene = await dataBase.get('scene');\n       if (curScene) {\n           if (!ColouringPage.outlineImage) {\n               ColouringPage.outlineImage = curScene.outlineImage;\n           } else {\n               curScene.outlineImage = ColouringPage.outlineImage;\n               curScene.hasChanges = true;\n               await dataBase.put(curScene,'scene');\n           }\n       }\n\n   }\n\n    async afterRender() {\n        document.getElementById('header').innerHTML = createHeader('');\n\n        let canvas = <HTMLCanvasElement> document.getElementById('canvas'),\n            chooseImageBtn = document.getElementById('chooseImageBtn'),\n            currentStyleEl = <HTMLElement> document.getElementById('currentStyle'),\n            toolbarEl = <HTMLElement> document.getElementById('toolbar'),\n            strokeWidthEl = <HTMLElement> document.getElementById('strokeWidth');\n\n        canvas.width = parseFloat(getComputedStyle(canvas).width);\n        canvas.height = canvas.width * 0.7;\n\n        let tools: Array<Tool> = [\n            new Line(),\n            new StraightLine(),\n            new Eraser(),\n            new Filler()\n\n        ];\n\n        let painter = new Painter(canvas, tools, ColouringPage.outlineImage);\n\n        await super.arrangeCurrentStyleEl(currentStyleEl);\n        await super.arrangeToolbar(toolbarEl, tools, painter);\n        this.arrangeStrokeWidthEl(strokeWidthEl);\n        super.arrangeColorBlocks();\n        await super.setBtnListeners(canvas, painter);\n\n\n\n\n    };\n\n    arrangeStrokeWidthEl(strokeWidthEl) {\n        let fragment = document.createDocumentFragment();\n        let value = 5,\n            step = 4,\n            index = 9;\n        for (let el = 0; el < 5; el++) {\n            let div = document.createElement('div');\n            div.classList.add('strokeWidthEl');\n            div.dataset.value = value.toString();\n            div.tabIndex = index++;\n            div.innerHTML =\n                `<svg width=\"90\" height=\"90\"  fill=\"#f8ae5d\" stroke=\"#485263\" stroke-width=\"3\">` +\n                    `<circle r=${value * 2} cx=\"45\" cy=\"45\">` +\n                `</svg>`;\n            fragment.append(div);\n            value += step;\n        }\n        strokeWidthEl.append(fragment);\n\n        strokeWidthEl.addEventListener('click', async (event) => {\n            let target = event.target.closest('div');\n            if(target) {\n                let fillColor = currentStyle.fillColor,\n                    strokeColor = currentStyle.strokeColor,\n                    strokeWidth = parseInt(target.dataset.value);\n                await setCurrentStyle(fillColor, strokeColor,strokeWidth);\n            }\n        })\n    }\n}\n","module.exports = __webpack_public_path__ + \"pages/home-page.13d630f799bf04d8ae0a7a4518f49ca2.html\";","import {Page} from \"../../core/router/page\";\r\nimport {createHeader} from \"../../core/common_functions\";\r\n\r\nexport class HomePage extends Page {\r\n\r\n    htmlAddress = require('./home-page.html');\r\n\r\n\r\n    render() {\r\n        return this.resolvedData.template;\r\n    }\r\n\r\n    afterRender() {\r\n        document.getElementById('header').innerHTML = createHeader(' ');\r\n    }\r\n}","module.exports = __webpack_public_path__ + \"pages/my_paintings-page.0570fd38ea6309a567b41f0a4f8c7829.html\";","import {Page} from \"../../core/router/page\";\r\nimport {dataBase, objectStores} from \"../../app\";\r\nimport {createGallery, createHeader} from \"../../core/common_functions\";\r\nimport {SavedPaintingParams} from \"../../core/canvas/canvas_interfaces\";\r\nimport {ColouringPage} from \"../colouring/colouring-page\";\r\nimport {Scene} from \"../../core/canvas/common/scene\";\r\n\r\nexport class MyPaintingsPage extends Page {\r\n\r\n    htmlAddress = require('./my_paintings-page.html');\r\n    currentImage: HTMLImageElement;\r\n    currentScene: Scene;\r\n\r\n\r\n    async beforeRender(){\r\n        await dataBase.init(this.objectStoreName, objectStores)\r\n            .catch ((e) => {\r\n                console.log(e);\r\n            });\r\n    }\r\n\r\n    async afterRender() {\r\n        document.getElementById('header').innerHTML = createHeader(' ');\r\n\r\n        let galleryEl: HTMLTableSectionElement = document.querySelector('.gallery');\r\n\r\n        let chooseImageBtn = <HTMLButtonElement> document.getElementById('chooseImageBtn'),\r\n            saveImageBtn = <HTMLButtonElement> document.getElementById('saveImageBtn'),\r\n            deleteBtn = <HTMLButtonElement> document.getElementById('deleteBtn');\r\n\r\n\r\n        let images: Array<Map<string, SavedPaintingParams>> = await dataBase.getAll();\r\n\r\n        let imgArr = images.reduce((arr, map) => {\r\n            let src = [...map.keys()][0],\r\n                alt = map.get(src).name;\r\n            arr.push([alt, src]);\r\n            return arr;\r\n        }, []);\r\n\r\n        let galleryFragment = await createGallery(imgArr);\r\n        galleryEl.append(galleryFragment);\r\n\r\n        galleryEl.addEventListener('click', (event: MouseEvent) => {\r\n            //@ts-ignore\r\n            let image = event.target.closest('img');\r\n            if (image) {\r\n                this.currentImage = image;\r\n                image.style.borderBottomColor = \"orange\";\r\n\r\n                let savedEl: Map<string, SavedPaintingParams> = images.find((map) => {\r\n                    return map.has(this.currentImage.src);\r\n                });\r\n                this.currentScene = savedEl.get(this.currentImage.src).scene;\r\n            }\r\n        });\r\n\r\n        chooseImageBtn.addEventListener('click', async () => {\r\n            if (this.currentImage) {\r\n                let outerPage: string;\r\n\r\n                if (this.currentScene.outlineImage) {\r\n                    await dataBase.init('ColouringPage');\r\n                    ColouringPage.outlineImage = this.currentScene.outlineImage;\r\n                    outerPage = '/colouring';\r\n                } else {\r\n                    await dataBase.init('PaintingPage');\r\n                    outerPage = '/painting';\r\n                }\r\n\r\n                await dataBase.put(this.currentScene, 'scene');\r\n                await dataBase.init(this.objectStoreName, objectStores);\r\n\r\n                history.pushState(outerPage, null, outerPage);\r\n                history.pushState(outerPage, null, outerPage);\r\n                history.back();\r\n            }\r\n        });\r\n\r\n        deleteBtn.addEventListener('click', async () => {\r\n            if (this.currentImage) {\r\n                this.currentImage.closest('figure').remove();\r\n\r\n                await dataBase.delete(this.currentImage.src);\r\n            }\r\n        });\r\n\r\n        saveImageBtn.addEventListener('click', async () => {\r\n            if (this.currentImage) {\r\n                let a: HTMLAnchorElement = document.createElement('a');\r\n                a.href = this.currentImage.src;\r\n                a.download = ' 1.png';\r\n                a.dispatchEvent(new MouseEvent('click'));\r\n            }\r\n        });\r\n\r\n\r\n    };\r\n}","module.exports = __webpack_public_path__ + \"pages/painting-page.08d02f43c986dc0304eb0253e0e09a84.html\";","import {createHeader} from \"../../core/common_functions\";\r\nimport {Page} from \"../../core/router/page\";\r\nimport {Line} from \"../../core/canvas/tools/line/line\";\r\nimport {Rect} from \"../../core/canvas/tools/rect/rect\";\r\nimport {Painter} from \"../../core/canvas/painter\";\r\nimport {Tool} from \"../../core/canvas/common/tool\";\r\nimport {setCurrentStyle} from \"../../core/canvas/currentState\";\r\nimport {dataBase, objectStores} from \"../../app\";\r\nimport {SavedPaintingParams} from \"../../core/canvas/canvas_interfaces\";\r\nimport {Filler} from \"../../core/canvas/tools/filler/filler\";\r\nimport {Eraser} from \"../../core/canvas/tools/eraser/eraser\";\r\nimport {Ellipse} from \"../../core/canvas/tools/ellipse/ellipse\";\r\nimport {StraightLine} from \"../../core/canvas/tools/straight_line/straightLine\";\r\n\r\nexport class PaintingPage extends Page {\r\n   htmlAddress = require('./painting-page.html');\r\n   activeColorBlock: HTMLDivElement;\r\n   activeCurColorEl: HTMLDivElement;\r\n\r\n\r\n    render() {\r\n        return this.resolvedData.template;\r\n    }\r\n\r\n    async beforeRender(){\r\n        await dataBase.init(this.objectStoreName, objectStores)\r\n            .catch( (err) => console.log(err));\r\n    }\r\n\r\n    async afterRender() {\r\n        document.getElementById('header').innerHTML = createHeader('');\r\n\r\n        let canvas = <HTMLCanvasElement> document.getElementById('canvas'),\r\n            currentStyleEl = <HTMLElement> document.getElementById('currentStyle'),\r\n            toolbarEl = <HTMLElement> document.getElementById('toolbar');\r\n\r\n        canvas.width = parseFloat(getComputedStyle(canvas).width);\r\n        canvas.height = canvas.width * 0.7;\r\n\r\n        let tools: Array<Tool> = [\r\n            new Line(),\r\n            new StraightLine(),\r\n            new Rect(),\r\n            new Ellipse(),\r\n            new Filler(),\r\n            new Eraser()\r\n        ];\r\n\r\n        let painter = new Painter(canvas, tools);\r\n\r\n        await this.arrangeCurrentStyleEl(currentStyleEl);\r\n        await this.arrangeToolbar(toolbarEl, tools, painter);\r\n        this.arrangeColorBlocks();\r\n        await this.setBtnListeners(canvas, painter);\r\n    };\r\n\r\n    async setBtnListeners(canvas, painter) {\r\n        let downloadBtn = <HTMLButtonElement> document.getElementById('downloadBtn'),\r\n            saveBtn = <HTMLButtonElement> document.getElementById('saveBtn'),\r\n            clearBtn = <HTMLButtonElement> document.getElementById('clearBtn'),\r\n            undoBtn = <HTMLButtonElement> document.getElementById('undoBtn'),\r\n            returnBtn = <HTMLButtonElement> document.getElementById('returnBtn'),\r\n            inputColorBtn = <HTMLInputElement> document.getElementById('inputColor');\r\n\r\n        downloadBtn.addEventListener('click', async () => {\r\n            let blob: Blob = await painter.export();\r\n            let url: string = URL.createObjectURL(blob);\r\n            let a: HTMLAnchorElement = document.createElement('a');\r\n            a.href = url;\r\n            a.download = ' 1.png';\r\n            a.dispatchEvent(new MouseEvent('click'));\r\n            URL.revokeObjectURL(url);\r\n        });\r\n\r\n        saveBtn.addEventListener('click', async () => {\r\n            let img = canvas.toDataURL('image/png');\r\n            let name: string = prompt('  ?', '');\r\n            let savedObject: Map<string, SavedPaintingParams> = new Map([\r\n                [img, {\r\n                    name,\r\n                    scene: await dataBase.get('scene')\r\n                }]\r\n            ]);\r\n            await dataBase.init('MyPaintingsPage');\r\n            await dataBase.put(savedObject, img);\r\n            await dataBase.init(this.objectStoreName);\r\n        });\r\n\r\n        clearBtn.addEventListener('click', async () => {\r\n            await painter.clear();\r\n        });\r\n\r\n        undoBtn.addEventListener('click', async () => {\r\n            await painter.undo();\r\n        });\r\n\r\n        returnBtn.addEventListener('click', async () => {\r\n            await painter.return();\r\n        });\r\n\r\n        inputColorBtn.addEventListener('input', (event) => {\r\n            if (this.activeColorBlock) {\r\n                //@ts-ignore\r\n                this.activeColorBlock.style.backgroundColor = event.target.value;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    async arrangeCurrentStyleEl(currentStyleEl) {\r\n        let fillColor = <HTMLDivElement> document.getElementById('fillColor'),\r\n            strokeColor = <HTMLDivElement> document.getElementById('strokeColor'),\r\n            strokeWidth = <HTMLInputElement> document.getElementById('strokeWidth');\r\n\r\n        let blocks = <HTMLCollectionOf<HTMLDivElement>> currentStyleEl.getElementsByClassName('color');\r\n        let width = getComputedStyle(blocks[0]).width;\r\n        for (let colorBlock of blocks) {\r\n            colorBlock.style.height = width;\r\n        }\r\n\r\n        let index = 7;\r\n        for (let el of currentStyleEl.children) {\r\n            el.tabIndex = index++;\r\n        }\r\n\r\n        fillColor.style.backgroundColor = await dataBase.get('fillColor') || '#595959';\r\n        strokeColor.style.backgroundColor = await dataBase.get('strokeColor') || '#7c7c7c';\r\n        strokeWidth.value = await dataBase.get('strokeWidth') || 5;\r\n\r\n        await setCurrentStyle(\r\n            fillColor.style.backgroundColor,\r\n            strokeColor.style.backgroundColor,\r\n            strokeWidth.value\r\n        );\r\n\r\n        currentStyleEl.addEventListener('click', (event) => {\r\n            let target = event.target.closest('.color');\r\n            if (target) {\r\n                this.activeCurColorEl = target;\r\n            }\r\n        });\r\n\r\n        currentStyleEl.addEventListener('dblclick', async () => {\r\n            await setCurrentStyle(\r\n                fillColor.style.backgroundColor,\r\n                strokeColor.style.backgroundColor,\r\n                strokeWidth.value\r\n            );\r\n        }, true);\r\n\r\n        currentStyleEl.addEventListener('change', async () => {\r\n            await setCurrentStyle(\r\n                fillColor.style.backgroundColor,\r\n                strokeColor.style.backgroundColor,\r\n                strokeWidth.value\r\n            );\r\n        });\r\n    }\r\n\r\n\r\n\r\n    arrangeColorBlocks() {\r\n        let colorBlocksEl: HTMLElement = document.getElementById('colorBlocks'),\r\n            blocks = <HTMLCollectionOf<HTMLDivElement>> colorBlocksEl.getElementsByClassName('color');\r\n\r\n        let width = getComputedStyle(blocks[0]).width;\r\n        for (let colorBlock of blocks) {\r\n            colorBlock.style.height = width;\r\n        }\r\n\r\n        let index = 15;\r\n        for (let el of blocks) {\r\n            el.tabIndex = index++;\r\n        }\r\n\r\n        colorBlocksEl.addEventListener('click', (event) => {\r\n            //@ts-ignore\r\n            let block = <HTMLDivElement> event.target.closest('.color');\r\n            if (block) {\r\n                if (this.activeCurColorEl) {\r\n                    this.activeCurColorEl.style.backgroundColor = getComputedStyle(block).backgroundColor;\r\n                    let event = new Event('dblclick');\r\n                    this.activeCurColorEl.dispatchEvent(event);\r\n\r\n                }\r\n                this.activeColorBlock = block;\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    async arrangeToolbar(toolbarEl, tools, painter) {\r\n        const TOOLS_MAP: Map<HTMLDivElement, Tool> = new Map();\r\n        let index = 3;\r\n\r\n        toolbarEl.append(tools.reduce((fragment: DocumentFragment, tool: Tool) => {\r\n            let div: HTMLDivElement = document.createElement('div');\r\n\r\n            div.innerHTML = tool.icon;\r\n            div.tabIndex = index++;\r\n            //btn.classList.add(tool.name);\r\n            fragment.appendChild(div);\r\n            TOOLS_MAP.set(div, tool);\r\n            return fragment;\r\n        }, document.createDocumentFragment()));\r\n\r\n        toolbarEl.addEventListener('click', (event: MouseEvent) => {\r\n            //@ts-ignore\r\n            let tool = TOOLS_MAP.get(event.target.closest('div'));\r\n            if (tool) {\r\n                painter.setTool(tool);\r\n            }\r\n        });\r\n    }\r\n\r\n}"],"sourceRoot":""}